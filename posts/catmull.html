<!doctype html>
<html>
    <head>
        <title> catmull-rom demo </title>
    </head>
    <body>
        <canvas width="600" height="400"></canvas>
        <script>
            const canvas = document.getElementsByTagName("canvas")[0];
            const ctx = canvas.getContext("2d");
            console.log(canvas.width, canvas.height);

            // Linearly interpolate alpha to be between start and end
            // Ex: lerp(0, 10, 0.2) => 2
            const lerp = (start, end, alpha) => start * (1 - alpha) + end * alpha;

            // Compute the knot value
            const getT = (t, alpha, p0, p1) =>  {
                const distance = Math.sqrt((p1.x - p0.x) ** 2 + (p1.y - p0.y) ** 2);
                return t + distance ** alpha;
            };

            const points = [
                {x: 0, y: 1.5}, {x: 2, y: 2},
                {x: 3, y: 1}, {x: 4, y: 0.5},
                {x: 5, y: 1}, {x: 6, y: 2}, {x: 7, y: 3}
            ];

            // TODO: define p0 and the rest of the algorithm

            const t0 = 0;
            const t1 = getT(t0, alpha, p0, p1);
            const t2 = getT(t1, alpha, p1, p2);
            const t3 = getT(t2, alpha, p2, p3);
            t = lerp(t1, t2, t); // t should be between 0 and 1
/*
FVector CatmullRom( const FVector& p0, const FVector& p1, const FVector& p2, const FVector& p3, float t, float alpha=.5f )
{
    float t0 = 0.0f;
    float t1 = GetT( t0, alpha, p0, p1 );
    float t2 = GetT( t1, alpha, p1, p2 );
    float t3 = GetT( t2, alpha, p2, p3 );
    t = FMath::Lerp( t1, t2, t );
    FVector A1 = ( t1-t )/( t1-t0 )*p0 + ( t-t0 )/( t1-t0 )*p1;
    FVector A2 = ( t2-t )/( t2-t1 )*p1 + ( t-t1 )/( t2-t1 )*p2;
    FVector A3 = ( t3-t )/( t3-t2 )*p2 + ( t-t2 )/( t3-t2 )*p3;
    FVector B1 = ( t2-t )/( t2-t0 )*A1 + ( t-t0 )/( t2-t0 )*A2;
    FVector B2 = ( t3-t )/( t3-t1 )*A2 + ( t-t1 )/( t3-t1 )*A3;
    FVector C  = ( t2-t )/( t2-t1 )*B1 + ( t-t1 )/( t2-t1 )*B2;
    return C;
}
            */
        </script>
    </body>
</html>
